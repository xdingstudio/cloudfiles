<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8" />
		<title>Dropzone.js - Bootstrap后台管理系统模版Ace下载</title>
		<meta name="keywords" content="Bootstrap模版,Bootstrap模版下载,Bootstrap教程,Bootstrap中文" />
		<meta name="description" content="站长素材提供Bootstrap模版,Bootstrap教程,Bootstrap中文翻译等相关Bootstrap插件下载" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- basic styles -->

		<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="assets/css/font-awesome.min.css" />

		<!--[if IE 7]>
		  <link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" />
		<![endif]-->

		<!-- page specific plugin styles -->

		<link rel="stylesheet" href="assets/css/dropzone.css" />

		

		<!-- ace styles -->

		<link rel="stylesheet" href="assets/css/ace.min.css" />
		<link rel="stylesheet" href="assets/css/ace-rtl.min.css" />
		<link rel="stylesheet" href="assets/css/ace-skins.min.css" />


               <link href="assets/css/smartMenu.css" rel="stylesheet" />
               <link href="assets/css/folder.css" rel="stylesheet" />

		<!--[if lte IE 8]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->

		<!-- inline styles related to this page -->

		<!-- ace settings handler -->

		<script src="assets/js/ace-extra.min.js"></script>
        <script type="text/javascript" src="login/js/jquery.cookie.js"></script>



		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

		<!--[if lt IE 9]>
		<script src="assets/js/html5shiv.js"></script>
		<script src="assets/js/respond.min.js"></script>
		<![endif]-->

	</head>

	<body>
		<div class="navbar navbar-default" id="navbar">
			<script type="text/javascript">
				try{ace.settings.check('navbar' , 'fixed')}catch(e){}
			</script>

			<div class="navbar-container" id="navbar-container">
				<div class="navbar-header pull-left">
					<a href="#" class="navbar-brand">
						<small>
							<i class="icon-leaf"></i>
							BigRoad网盘
						</small>
					</a><!-- /.brand -->
				</div><!-- /.navbar-header -->
				<div class="navbar-header pull-left">
					<a href="myDropBox.html" class="navbar-brand" style="margin-left:10px">
						<small>
							我的网盘
						</small>
					</a><!-- /.brand -->
				</div><!-- /.navbar-header -->
								<div class="navbar-header pull-left">
					<a href="#" class="navbar-brand">
						<small>
							企业网盘
						</small>
					</a><!-- /.brand -->
				</div><!-- /.navbar-header -->
								<div class="navbar-header pull-left">
					<a href="myAffair.html" class="navbar-brand">
						<small>
						    事务处理
						</small>
					</a><!-- /.brand -->
				</div><!-- /.navbar-header -->
				<div class="navbar-header pull-right" role="navigation">
					<ul class="nav ace-nav">
						<li class="grey">
							<a data-toggle="dropdown" class="dropdown-toggle" href="#">
								<i class="icon-tasks"></i>
								<span class="badge badge-grey">4</span>
							</a>

							<ul class="pull-right dropdown-navbar dropdown-menu dropdown-caret dropdown-close">
								<li class="dropdown-header">
									<i class="icon-ok"></i>
									4个任务未完成
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">任务1</span>
											<span class="pull-right">65%</span>
										</div>

										<div class="progress progress-mini ">
											<div style="width:65%" class="progress-bar "></div>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">任务2</span>
											<span class="pull-right">35%</span>
										</div>

										<div class="progress progress-mini ">
											<div style="width:35%" class="progress-bar progress-bar-danger"></div>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">任务3</span>
											<span class="pull-right">15%</span>
										</div>

										<div class="progress progress-mini ">
											<div style="width:15%" class="progress-bar progress-bar-warning"></div>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">任务4</span>
											<span class="pull-right">90%</span>
										</div>

										<div class="progress progress-mini progress-striped active">
											<div style="width:90%" class="progress-bar progress-bar-success"></div>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										查看详细信息
										<i class="icon-arrow-right"></i>
									</a>
								</li>
							</ul>
						</li>

						<li class="purple">
							<a data-toggle="dropdown" class="dropdown-toggle" href="#">
								<i class="icon-bell-alt icon-animated-bell"></i>
								<span class="badge badge-important">8</span>
							</a>

							<ul class="pull-right dropdown-navbar navbar-pink dropdown-menu dropdown-caret dropdown-close">
								<li class="dropdown-header">
									<i class="icon-warning-sign"></i>
									8个提醒
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">
												<i class="btn btn-xs no-hover btn-pink icon-comment"></i>
												新的文件
											</span>
											<span class="pull-right badge badge-info">+12</span>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<i class="btn btn-xs btn-primary icon-user"></i>
										新建文件夹
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">
												<i class="btn btn-xs no-hover btn-success icon-shopping-cart"></i>
												别人发给的消息
											</span>
											<span class="pull-right badge badge-success">+8</span>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">
												<i class="btn btn-xs no-hover btn-info icon-twitter"></i>
												好友
											</span>
											<span class="pull-right badge badge-info">+11</span>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										查看所有提醒
										<i class="icon-arrow-right"></i>
									</a>
								</li>
							</ul>
						</li>

						<li class="green">
							<a data-toggle="dropdown" class="dropdown-toggle" href="#">
								<i class="icon-envelope icon-animated-vertical"></i>
								<span class="badge badge-success">5</span>
							</a>

							<ul class="pull-right dropdown-navbar dropdown-menu dropdown-caret dropdown-close">
								<li class="dropdown-header">
									<i class="icon-envelope-alt"></i>
									5个消息
								</li>

								<li>
									<a href="#">
										<img src="assets/avatars/avatar.png" class="msg-photo" alt="Alex's Avatar" />
										<span class="msg-body">
											<span class="msg-title">
												<span class="blue">好友1</span>
												我给你发了个文件
											</span>

											<span class="msg-time">
												<i class="icon-time"></i>
												<span>1分钟前</span>
											</span>
										</span>
									</a>
								</li>

								<li>
									<a href="#">
										<img src="assets/avatars/avatar3.png" class="msg-photo" alt="Susan's Avatar" />
										<span class="msg-body">
											<span class="msg-title">
												<span class="blue">好友2:</span>
												给你发了个文件
											</span>

											<span class="msg-time">
												<i class="icon-time"></i>
												<span>20分钟前</span>
											</span>
										</span>
									</a>
								</li>

								<li>
									<a href="#">
										<img src="assets/avatars/avatar4.png" class="msg-photo" alt="Bob's Avatar" />
										<span class="msg-body">
											<span class="msg-title">
												<span class="blue">好友3:</span>
												给你发了个文件
											</span>

											<span class="msg-time">
												<i class="icon-time"></i>
												<span>3分钟前</span>
											</span>
										</span>
									</a>
								</li>

								<li>
									<a href="inbox.html">
										查看所有消息
										<i class="icon-arrow-right"></i>
									</a>
								</li>
							</ul>
						</li>

						<li class="light-blue">
							<a data-toggle="dropdown" href="#" class="dropdown-toggle">
								<img class="nav-user-photo" src="assets/avatars/user.jpg" alt="Jason's Photo" />
								<span class="user-info">
									<small>欢迎,</small>
									Nancy
								</span>

								<i class="icon-caret-down"></i>
							</a>

							<ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
								<li>
									<a href="#">
										<i class="icon-cog"></i>
										设置
									</a>
								</li>

								<li>
									<a href="#">
										<i class="icon-user"></i>
										个人信息
									</a>
								</li>

								<li class="divider"></li>

								<li>
									<a href="#">
										<i class="icon-off"></i>
										退出
									</a>
								</li>
							</ul>
						</li>
					</ul><!-- /.ace-nav -->
				</div><!-- /.navbar-header -->
			</div><!-- /.container -->
		</div>

		<div class="main-container" id="main-container">
			<script type="text/javascript">
				try{ace.settings.check('main-container' , 'fixed')}catch(e){}
			</script>

			<div class="main-container-inner">
				<a class="menu-toggler" id="menu-toggler" href="#">
					<span class="menu-text"></span>
				</a>

				<div class="sidebar" id="sidebar">
					<script type="text/javascript">
						try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
					</script>

	
					<ul class="nav nav-list">
				

						<li>
							<a href="#">
								<i class="icon-picture"></i>
								<span class="menu-text"> 图片 </span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class=" icon-film"></i>
								<span class="menu-text"> 视频 </span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="icon-folder-close-alt"></i>
								<span class="menu-text"> 文档 </span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="icon-music"></i>
								<span class="menu-text"> 音乐 </span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="icon-heart"></i>
								<span class="menu-text"> 收藏 </span>
							</a>
						</li>
					</ul><!-- /.nav-list -->

					<div class="sidebar-collapse" id="sidebar-collapse">
						<i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i>
					</div>

					<script type="text/javascript">
						try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
					</script>
				</div>

				<div class="main-content">
					<div class="breadcrumbs" id="breadcrumbs">
						<script type="text/javascript">
							try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
						</script>

						<ul class="breadcrumb" id="filepath">
							
						</ul><!-- .breadcrumb -->

						<div class="nav-search" id="nav-search">
							<form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="icon-search nav-search-icon"></i>
								</span>
							</form>
						</div><!-- #nav-search -->
					</div>

					<div class="page-content">
						<div class="page-header">
					
							                 
							                 <button class="btn btn-primary no-border" id="newfolder">新建文件夹 </button>      
                                              <input type="file" name="" id="uploadinput" name="fileToUpload"  onchange="uploadFile()">
                                               <a href="#" onclick="var o=document.getElementById('uploadinput');o.click();" class="btn btn-primary no-border">上传 </a>
                                       
						</div><!-- /.page-header -->

						<div class="row">
							
								<!-- PAGE CONTENT BEGINS -->

                                              <div  class="alldom">
                                                      <ul id="divall" class="folderlist">
         
                                                      
       						        
       							
   						 </ul>
					    </div>
		
						</div><!-- /.row -->
					</div><!-- /.page-content -->
				</div><!-- /.main-content -->

				<div class="ace-settings-container" id="ace-settings-container">
					<div class="btn btn-app btn-xs btn-warning ace-settings-btn" id="ace-settings-btn">
						<i class="icon-cog bigger-150"></i>
					</div>

					<div class="ace-settings-box" id="ace-settings-box">
						<div>
							<div class="pull-left">
								<select id="skin-colorpicker" class="hide">
									<option data-skin="default" value="#438EB9">#438EB9</option>
									<option data-skin="skin-1" value="#222A2D">#222A2D</option>
									<option data-skin="skin-2" value="#C6487E">#C6487E</option>
									<option data-skin="skin-3" value="#D0D0D0">#D0D0D0</option>
								</select>
							</div>
							<span>&nbsp; 换肤</span>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-navbar" />
							<label class="lbl" for="ace-settings-navbar"> 固定导航栏</label>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-sidebar" />
							<label class="lbl" for="ace-settings-sidebar"> 固定侧边栏</label>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-rtl" />
							<label class="lbl" for="ace-settings-rtl"> 左右翻转</label>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-add-container" />
							<label class="lbl" for="ace-settings-add-container">
								缩小
								
							</label>
						</div>
					</div>
				</div><!-- /#ace-settings-container -->
			</div><!-- /.main-container-inner -->

			<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
				<i class="icon-double-angle-up icon-only bigger-110"></i>
			</a>
		</div><!-- /.main-container -->

		<!-- basic scripts -->

		<!--[if !IE]> -->

		<script type="text/javascript" src="assets/js/jquery-2.0.3.min.js"></script>

		<!-- <![endif]-->

		<!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->

		<!--[if !IE]> -->

		<script type="text/javascript">
			window.jQuery || document.write("<script src='aswodsets/js/jquery-2.0.3.min.js'>"+"<"+"/script>");
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

		<script type="text/javascript">
			if("ontouchend" in document) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>
		<script src="assets/js/bootstrap.min.js"></script>
		<script src="assets/js/typeahead-bs2.min.js"></script>

		<!-- page specific plugin scripts -->

		<script src="assets/js/dropzone.min.js"></script>

		<!-- ace scripts -->

		<script src="assets/js/ace-elements.min.js"></script>
		<script src="assets/js/ace.min.js"></script>

        <script type="text/javascript" src="assets/js/jquery-smartMenu.js"></script>
      
		<!-- inline scripts related to this page -->
        <script type="text/javascript" src="login/js/jquery.cookie.js"></script>
		<script type="text/javascript">
			jQuery(function($){

		var token= $.cookie("X-Auth-Token"); 
	   // alert(token);
		var userID= $.cookie("X-Auth-ID"); 
		//alert(userID);
        var uri = 'v1.0/person/'+userID;
       // alert(uri);
		$.ajax({
			type: 'GET',
			url: uri,
			dataType:'json',
			data: {},
			async:false,
			success: function(data){
				  var jsonData = eval(data);
				  $("#divall").empty();
			       $.each(jsonData.personFileJson, function(id, value) {
					//	alert(value.fileExtension);
				//	alert(value.fileId);
				//	alert(value.fileName);
					//	var iii = $("<input type='text' class='changename'>");
                     //    iii.val(value.fileName);
				//		alert(value.fileType);
					//	var targetObj = $("<input type='text' class='changename' value='test'>").appendTo("#divall");
					  if(value.fileType == '1')
					   {
						   $("#divall").append(
						  "<li class='folder'>" +"<div class='folderdiv' id='"+value.fileId+"'>"+"<input type='text' class='changename' value='"+value.fileName+"'>"+"</div>" +"</li>"
						 );
					//	 alert(value.fileType);
					   }
					   else if(value.fileType == '0')
					   {
						    $("#divall").append(
						  "<li class='"+value.fileExtension.substring(1)+"'>" +"<div class='filediv' id='"+value.fileId+"'>"+"<input type='text' class='changename' value='"+value.fileName+"'>"+"</div>" +"</li>"
						 );
					   }
					  //alert(value.fileType);
						  else if (value.fileType == '3'){
							  $("#filepath").append(
								    	"<li id='"+value.fileId+"'><i class='icon-home home-icon'></i><a >我的网盘</a></li>"
								       );
						  }	
					//	$.parser.parse(targetObj);
				   });
			     
			},
			error: function()
			{
				alert("fail");
			},
			headers: {
				"X-Auth-Token":"sss"
			}
       });
		
		var foldermenu = [
			[{
				text: "打开文件夹",
				func: function() {
					  //alert("1");
				}
			}]
		   ,
			[{
				text: "删除文件夹",
				func: function() {
					  alert("1");
				}
			}]
		　,[{
				text: "分享文件夹",
				func: function() {
					  alert("1");
				}
			}]
		];

	
		
		
$("body").on("mousedown",".folder",function(e){

		        //DoSomeThing
			    var e = e || window.event  

		        if(e.button == "2"){  
		        	$(this).smartMenu(foldermenu, {
		    			name: "mail",
						beforeShow: function() {
						
						//动态数据，及时清除
						$.smartMenu.remove();}

				});
		        }  
		 
		});

	$("body").on("dblclick",".folderdiv",function(){
			 //   alert("click");
			   // alert($(this).attr("id"));
				var urlN = 'v1.0/person/'+userID+'/'+$(this).attr("id");
				var folderid=$(this).attr("id");
				var name = $(this).children().val();
				alert(urlN);
				 $.ajax({
						type: 'GET',
						url:urlN,
						dataType:'json',
						data: {},
						async:false,
						success: function(data){
							  var jsonData = eval(data);
							  $("#divall").empty();
						       $.each(jsonData.personFileJson, function(id, value) {
								//	alert(value.fileExtension);
								//alert(value.fileId);
								//	alert(value.fileName);
								//	var iii = $("<input type='text' class='changename'>");
			                     //    iii.val(value.fileName);
								//	alert(value.fileType);
								//	var targetObj = $("<input type='text' class='changename' value='test'>").appendTo("#divall");
								  if(value.fileType == 1)
								   {
									   $("#divall").append(
									  "<li class='folder'>" +"<div class='folderdiv' id='"+value.fileId+"'>"+"<input type='text' class='changename' value='"+value.fileName+"'>"+"</div>" +"</li>"
									 );
								   }
								   else if(value.fileType == 0)
								   {
									    $("#divall").append(
									    		 "<li class='"+value.fileExtension.substring(1)+"'>" +"<div class='filediv' id='"+value.fileId+"'>"+"<input type='text' class='changename' value='"+value.fileName+"'>"+"</div>" +"</li>"
									    		 );
								   };
							      
								//	$.parser.parse(targetObj);
							   });
						       var length = $("#filepath li").length;
						       alert(length);
						       if (length==1){
						    	   $("#filepath").append("<li  class='active'  id='"+folderid+"'>" +name+"</li>" );
						       }
						       else {
						    	   

						    	   var frontname =    $("#filepath li:last-child")[0].innerHTML;
						    	   alert(frontname);
						    	   $("#filepath li:last-child").removeClass("active");
						    	   $("#filepath li:last-child")[0].innerHTML="<a >"+frontname+"</a>";
						    	   $("#filepath").append("<li  class='active'  id='"+folderid+"'>" +name+"</li>" );
						       }
						},
						error: function()
						{
							alert("fail");
						},
						headers: {
							"X-Auth-Token":"sss"
						}
			       });
				
		  });
	

		var filemenu = [
			[{
				text: "下载文件",
				func: function() {
					  alert("1");
				}
			}]
		   ,
			[{
				text: "删除文件",
				func: function() {
					  alert("1");
				}
			}]
			,[{
				text: "分享文件",
				func: function() {
					  alert("1");
				}
			}]
		];


		$(".changename").on('focus' , function(){
					 $(this).css('border','1px solid #FF0000');
				 $(this).val('');
		 });
		
		$("body").on("blur",".changename",function(){
					
					alert('确定修改文件名？');
					 $(this).css('border','none');
					 if( $(this).val() == ""){
						 $(this).val('新建文件夹');
						 }else{
							// $(this).parent().find('span').text() = $(this).value; 
							 }

		});
		
		$("#uploadinput").on('change',function(){
			uploadFile();
	   }); 
		$("#newfolder").on('click',function(){
			       
			           $("#divall").append(
					    "<li class='folder'>" +"<div class='folderdiv' >"+"<input type='text' class='changename' value='新建文件夹'>"+"</div>" +"</li>"
					   );
                       var folderid =   $("#filepath li:last-child").attr("id");
                     
                       var url="v1.0/person/"+ userID+"/"+folderid;
                       var data = {"foldername":"ssss"};
                       $.ajax({
   						type: 'POST',
   						url:url,
   				
   						data: {'foldername':'ssss'},
   						async:false,
   						success: function(data){
   							alert(data);
   						},
   						error: function()
   						{
   							alert("fail");
   						},
   						headers: {
   							"X-Auth-Token":"sss"
   						}
   			       });
                    
	   }); 
		
		
		 function uploadFile() {
	          
			 var folderid =   $("#filepath li:last-child").attr("id");
		      var fd = new FormData();
		      fd.append("file", document.getElementById('uploadinput').files[0]);
		      var xhr = new XMLHttpRequest();
		      xhr.upload.addEventListener("progress", uploadProgress, false);  
		      xhr.addEventListener("load", uploadComplete, false);  
		      xhr.addEventListener("error", uploadFailed, false);  
		      xhr.addEventListener("abort", uploadCanceled, false);  
		      xhr.open("POST", "v1.0/person/"+userID+"/"+folderid+"/upload",true);
		      xhr.send(fd);
		    }
		    
		    
		    function uploadProgress(evt) {  
		        if (evt.lengthComputable) {  
		          var percentComplete = Math.round(evt.loaded * 100 / evt.total);  
		          document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';  
		        }  
		        else {  
		          document.getElementById('progressNumber').innerHTML = 'unable to compute';  
		        }  
		      }  
		  
		      function uploadComplete(evt) {  
		        /* This event is raised when the server send back a response */  
		        alert(evt.target.responseText);  
		      }  
		  
		      function uploadFailed(evt) {  
		        alert("There was an error attempting to upload the file.");  
		      }  
		  
		      function uploadCanceled(evt) {  
		        alert("The upload has been canceled by the user or the browser dropped the connection.");  
		      }  
		      
		      
		      function rest(restUrl, httpMethod, param, contenttype, datatype, callback,token) {
		    	    $.ajax({
   						type: httpMethod ,
   						url:restUrl,
   						dataType:datatype,
   						data:param,
   						success: callback,
   						headers: {
   							"X-Auth-Token":token
   						}
   			       });
		     }
});
			

</script>
	
</body>

</html>
